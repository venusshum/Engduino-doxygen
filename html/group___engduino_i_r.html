<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>Engduino: Driver for Engduino IR</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="Engduino.ico"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">Engduino
   &#160;<span id="projectnumber">3.1.0</span>
   </div>
   <div id="projectbrief">A fun device for learning coding</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#nested-classes">Classes</a> &#124;
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Driver for Engduino IR</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:_engduino_i_r_8cpp"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_engduino_i_r_8cpp.html">EngduinoIR.cpp</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:_engduino_i_r_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_engduino_i_r_8h.html">EngduinoIR.h</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_engduino_i_r_class.html">EngduinoIRClass</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:ga30d9b8759178d9c4b1fa253aa97f11a0"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga30d9b8759178d9c4b1fa253aa97f11a0"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DEBUGG</b>&#160;&#160;&#160;0</td></tr>
<tr class="separator:ga30d9b8759178d9c4b1fa253aa97f11a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9db1f57198f1a28c1c509736a234bf1e"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga9db1f57198f1a28c1c509736a234bf1e"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>IRBUFSZ</b>&#160;&#160;&#160;12</td></tr>
<tr class="separator:ga9db1f57198f1a28c1c509736a234bf1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga16525a2e6feec2a35d0d4329d0446ea7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga16525a2e6feec2a35d0d4329d0446ea7"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>RAWBUFSZ</b>&#160;&#160;&#160;100</td></tr>
<tr class="separator:ga16525a2e6feec2a35d0d4329d0446ea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga34781bb4f876dfe1b80bc460ab33e31b"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga34781bb4f876dfe1b80bc460ab33e31b"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STATE_BLOCKED</b>&#160;&#160;&#160;1</td></tr>
<tr class="separator:ga34781bb4f876dfe1b80bc460ab33e31b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaafff27c7165f059a969fe60fee51f683"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaafff27c7165f059a969fe60fee51f683"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STATE_IDLE</b>&#160;&#160;&#160;2</td></tr>
<tr class="separator:gaafff27c7165f059a969fe60fee51f683"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad626525de64652a4b0c64d01b2ac00a8"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad626525de64652a4b0c64d01b2ac00a8"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STATE_READING</b>&#160;&#160;&#160;3</td></tr>
<tr class="separator:gad626525de64652a4b0c64d01b2ac00a8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaacae076377c971590fc9d8a116c0e4e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaacae076377c971590fc9d8a116c0e4e6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STATE_STOP</b>&#160;&#160;&#160;4</td></tr>
<tr class="separator:gaacae076377c971590fc9d8a116c0e4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab8be08a601a78e641537fc0b35e0b9f3"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab8be08a601a78e641537fc0b35e0b9f3"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>STATE_TIMEOUT</b>&#160;&#160;&#160;5</td></tr>
<tr class="separator:gab8be08a601a78e641537fc0b35e0b9f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2a2129b3f6b7ce06869b7f16b81aff6f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga2a2129b3f6b7ce06869b7f16b81aff6f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>GAP</b>&#160;&#160;&#160;5000</td></tr>
<tr class="separator:ga2a2129b3f6b7ce06869b7f16b81aff6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaad3a234ad7aae00ad0d3a610bebb91ea"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gaad3a234ad7aae00ad0d3a610bebb91ea"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>DELAYOFFSET</b>&#160;&#160;&#160;9</td></tr>
<tr class="separator:gaad3a234ad7aae00ad0d3a610bebb91ea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gad8eaec54c72d47f5c161e54ef1928c91"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gad8eaec54c72d47f5c161e54ef1928c91"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>BITTIME</b>&#160;&#160;&#160;(600-DELAYOFFSET)</td></tr>
<tr class="separator:gad8eaec54c72d47f5c161e54ef1928c91"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga774d7e55fd5374068c4f30a947ce37e6"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga774d7e55fd5374068c4f30a947ce37e6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MARKSPACESPLIT</b>&#160;&#160;&#160;1500</td></tr>
<tr class="separator:ga774d7e55fd5374068c4f30a947ce37e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1ffb2899b56235563ff47de8478b9864"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1ffb2899b56235563ff47de8478b9864"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>E_TIMEOUT</b>&#160;&#160;&#160;-1</td></tr>
<tr class="separator:ga1ffb2899b56235563ff47de8478b9864"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6d8b72b02917be993b64ec0da1ed8fd"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gac6d8b72b02917be993b64ec0da1ed8fd"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>E_SYSERR</b>&#160;&#160;&#160;-2</td></tr>
<tr class="separator:gac6d8b72b02917be993b64ec0da1ed8fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabeb214368f7f34cff98de9047aa6eb2f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gabeb214368f7f34cff98de9047aa6eb2f"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>MARK</b>&#160;&#160;&#160;true</td></tr>
<tr class="separator:gabeb214368f7f34cff98de9047aa6eb2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5ff6e798033f03e74730e99f01936f84"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga5ff6e798033f03e74730e99f01936f84"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>SPACE</b>&#160;&#160;&#160;false</td></tr>
<tr class="separator:ga5ff6e798033f03e74730e99f01936f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaa64c6dce15e9de9105b4ae9533c9a267"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#gaa64c6dce15e9de9105b4ae9533c9a267">ISR</a> (PCINT0_vect)</td></tr>
<tr class="memdesc:gaa64c6dce15e9de9105b4ae9533c9a267"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISR2 interrupt service routine, called when a falling edge is seen on the RX line.  <a href="#gaa64c6dce15e9de9105b4ae9533c9a267">More...</a><br /></td></tr>
<tr class="separator:gaa64c6dce15e9de9105b4ae9533c9a267"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga31e211eaf3d75b51ddc639533541f25e"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#ga31e211eaf3d75b51ddc639533541f25e">ISR</a> (TIMER3_COMPB_vect)</td></tr>
<tr class="memdesc:ga31e211eaf3d75b51ddc639533541f25e"><td class="mdescLeft">&#160;</td><td class="mdescRight">ISR3 interrupt service routine, called when the timer has expired.  <a href="#ga31e211eaf3d75b51ddc639533541f25e">More...</a><br /></td></tr>
<tr class="separator:ga31e211eaf3d75b51ddc639533541f25e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1badf5d0acbb643f6bcf3deee4ffab13"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga1badf5d0acbb643f6bcf3deee4ffab13"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>TIMER3_COMPB_vect</b> (void) __attribute__((signal))</td></tr>
<tr class="separator:ga1badf5d0acbb643f6bcf3deee4ffab13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga69f6ac4d3bc5d08dc4a985794670478f"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga69f6ac4d3bc5d08dc4a985794670478f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>INT2_vect</b> (void) __attribute__((signal))</td></tr>
<tr class="separator:ga69f6ac4d3bc5d08dc4a985794670478f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72338894182d59b1199d67dc13fbf68d"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ga72338894182d59b1199d67dc13fbf68d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>PCINT0_vect</b> (void) __attribute__((signal))</td></tr>
<tr class="separator:ga72338894182d59b1199d67dc13fbf68d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7a7733226d0614e9d7401d499cccb8de"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#ga7a7733226d0614e9d7401d499cccb8de">EngduinoIRClass::EngduinoIRClass</a> ()</td></tr>
<tr class="memdesc:ga7a7733226d0614e9d7401d499cccb8de"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor.  <a href="#ga7a7733226d0614e9d7401d499cccb8de">More...</a><br /></td></tr>
<tr class="separator:ga7a7733226d0614e9d7401d499cccb8de"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga175bacdfa791bca99cf90400559d5a3c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#ga175bacdfa791bca99cf90400559d5a3c">EngduinoIRClass::begin</a> ()</td></tr>
<tr class="memdesc:ga175bacdfa791bca99cf90400559d5a3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">begin function - must be called before using other functions  <a href="#ga175bacdfa791bca99cf90400559d5a3c">More...</a><br /></td></tr>
<tr class="separator:ga175bacdfa791bca99cf90400559d5a3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga8ca0afe3a5b7eae3543b5717c95048cc"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#ga8ca0afe3a5b7eae3543b5717c95048cc">EngduinoIRClass::end</a> ()</td></tr>
<tr class="memdesc:ga8ca0afe3a5b7eae3543b5717c95048cc"><td class="mdescLeft">&#160;</td><td class="mdescRight">end function - switch off the IR  <a href="#ga8ca0afe3a5b7eae3543b5717c95048cc">More...</a><br /></td></tr>
<tr class="separator:ga8ca0afe3a5b7eae3543b5717c95048cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf8b6552647c01a98d12f3acb98f50b8a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#gaf8b6552647c01a98d12f3acb98f50b8a">EngduinoIRClass::sendBit</a> (bool b)</td></tr>
<tr class="memdesc:gaf8b6552647c01a98d12f3acb98f50b8a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a single bit.  <a href="#gaf8b6552647c01a98d12f3acb98f50b8a">More...</a><br /></td></tr>
<tr class="separator:gaf8b6552647c01a98d12f3acb98f50b8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga5380221a35dec8cae06e305a640047ad"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#ga5380221a35dec8cae06e305a640047ad">EngduinoIRClass::send</a> (uint8_t b, bool startstop=true)</td></tr>
<tr class="memdesc:ga5380221a35dec8cae06e305a640047ad"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a byte.  <a href="#ga5380221a35dec8cae06e305a640047ad">More...</a><br /></td></tr>
<tr class="separator:ga5380221a35dec8cae06e305a640047ad"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabcf780f269e0570a4dcd1f07f628ba17"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#gabcf780f269e0570a4dcd1f07f628ba17">EngduinoIRClass::send</a> (uint8_t *buf, unsigned int len, bool startstop=true)</td></tr>
<tr class="memdesc:gabcf780f269e0570a4dcd1f07f628ba17"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a buffer of bytes.  <a href="#gabcf780f269e0570a4dcd1f07f628ba17">More...</a><br /></td></tr>
<tr class="separator:gabcf780f269e0570a4dcd1f07f628ba17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2f933b89a87c5234454509bf6bc53ea5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#ga2f933b89a87c5234454509bf6bc53ea5">EngduinoIRClass::send</a> (char *buf, unsigned int len, bool startstop=true)</td></tr>
<tr class="memdesc:ga2f933b89a87c5234454509bf6bc53ea5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a buffer of bytes.  <a href="#ga2f933b89a87c5234454509bf6bc53ea5">More...</a><br /></td></tr>
<tr class="separator:ga2f933b89a87c5234454509bf6bc53ea5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gadd747831975bc37388f0ad27f6085c60"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#gadd747831975bc37388f0ad27f6085c60">EngduinoIRClass::sendRaw</a> (unsigned int *buf, int len)</td></tr>
<tr class="memdesc:gadd747831975bc37388f0ad27f6085c60"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw send function. Provide timings for mark and space pairs.  <a href="#gadd747831975bc37388f0ad27f6085c60">More...</a><br /></td></tr>
<tr class="separator:gadd747831975bc37388f0ad27f6085c60"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaca86f6ca262e5a77553535000f0b24a9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#gaca86f6ca262e5a77553535000f0b24a9">EngduinoIRClass::recv</a> (uint8_t *buf, uint16_t timeout=0, bool startstop=true)</td></tr>
<tr class="memdesc:gaca86f6ca262e5a77553535000f0b24a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Blocking receive of an IR transmission, with optional timeout.  <a href="#gaca86f6ca262e5a77553535000f0b24a9">More...</a><br /></td></tr>
<tr class="separator:gaca86f6ca262e5a77553535000f0b24a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga62662ec690cb14fbd4b0bb511880cc77"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group___engduino_i_r.html#ga62662ec690cb14fbd4b0bb511880cc77">EngduinoIRClass::recvRaw</a> (uint16_t *buf, uint16_t timeout=0)</td></tr>
<tr class="memdesc:ga62662ec690cb14fbd4b0bb511880cc77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Raw receive function - returns timings for inter-mark gaps.  <a href="#ga62662ec690cb14fbd4b0bb511880cc77">More...</a><br /></td></tr>
<tr class="separator:ga62662ec690cb14fbd4b0bb511880cc77"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:gab19554127bd1371c6b99792621db1960"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab19554127bd1371c6b99792621db1960"></a>
<a class="el" href="class_engduino_i_r_class.html">EngduinoIRClass</a>&#160;</td><td class="memItemRight" valign="bottom"><b>EngduinoIR</b> = <a class="el" href="class_engduino_i_r_class.html">EngduinoIRClass</a>()</td></tr>
<tr class="separator:gab19554127bd1371c6b99792621db1960"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab19554127bd1371c6b99792621db1960"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="gab19554127bd1371c6b99792621db1960"></a>
<a class="el" href="class_engduino_i_r_class.html">EngduinoIRClass</a>&#160;</td><td class="memItemRight" valign="bottom"><b>EngduinoIR</b></td></tr>
<tr class="separator:gab19554127bd1371c6b99792621db1960"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>This is the driver code for IR on the Engduino On v1.0 this is the Vishay TFBS4711 chip. This driver makes use of a timer to measure the length of inter-mark gaps, and an edge-triggered ISR to know where the marks are.</p>
<p>Because the ISR for the LEDs occupies considerable time, this can run slowly and somewhat erratically, meaning that only a rather low data rate is possible. The code distinguishes between marks and spaces based on the relative timings of them, and the threshold is hardwired in the header file.</p>
<p>This code makes use of timer 3, which cannot then be used for other purposes. </p>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ga175bacdfa791bca99cf90400559d5a3c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EngduinoIRClass::begin </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>begin function - must be called before using other functions </p>
<p>This function enables the IR, sets up the receive state machine, initialises timer 3 to run at 1MHz, to give high resolution timings, and sets the interrupts for the TFBS4711 IR device. The TFBS4711 chip will drive the IR_RX line low briefly when receiving a mark, and will not generate any event whilst receiving a space. Consequently, we can only tell the difference between them by looking at the gaps between two marks; longer gaps mean more spaces. </p>

</div>
</div>
<a class="anchor" id="ga8ca0afe3a5b7eae3543b5717c95048cc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EngduinoIRClass::end </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>end function - switch off the IR </p>
<p>Switch off both the IR chip and the ISRs. </p>

</div>
</div>
<a class="anchor" id="ga7a7733226d0614e9d7401d499cccb8de"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">EngduinoIRClass::EngduinoIRClass </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor. </p>
<p>C++ constructor for this class. Empty. </p>

</div>
</div>
<a class="anchor" id="gaa64c6dce15e9de9105b4ae9533c9a267"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">PCINT0_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ISR2 interrupt service routine, called when a falling edge is seen on the RX line. </p>
<p>Set for a falling edge on the INT2 pin - i.e. on IR_RX. Such events occur in 2.2us periods when there is a mark on the IR. The width of the pulse is unrelated to the baud rate of transmission, so we simply time the space between marks using timer 3, setting (and resetting) a timeout which, when it expires, indicates that the code has ended. </p>

</div>
</div>
<a class="anchor" id="ga31e211eaf3d75b51ddc639533541f25e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TIMER3_COMPB_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>ISR3 interrupt service routine, called when the timer has expired. </p>
<p>TIMER3 interrupt code - timer 3 COMPB is used as a timeout to determine when a code we are receiving has ended, or when a call to the recv function has timed out. </p>

</div>
</div>
<a class="anchor" id="gaca86f6ca262e5a77553535000f0b24a9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int EngduinoIRClass::recv </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startstop</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Blocking receive of an IR transmission, with optional timeout. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The buffer in which to place the received data </td></tr>
    <tr><td class="paramname">timeout</td><td>The time to wait before returning </td></tr>
    <tr><td class="paramname">startstop</td><td>Whether to remove start/stop bits from transmission </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of the buffer in bytes.</dd></dl>
<p>Receive a message if it's there to be received. Otherwise wait for a time that depends on the timeout value: if this is zero (as it is by default), then wait forever, else set a timer. If the timer expires return a negative number (-1), else return the length of the buffer received. The timeout is considered not to have expired if, by the time the period is passed, a message has <em>started</em> to arrive.</p>
<p>The first received bit is placed in the MSB, meaning that if there is not a complete byte's worth of data, the lowest bits will be zero.</p>
<p>Note: Differentiating between a mark and a space is based on a hardwired test of length. </p>

</div>
</div>
<a class="anchor" id="ga62662ec690cb14fbd4b0bb511880cc77"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int EngduinoIRClass::recvRaw </td>
          <td>(</td>
          <td class="paramtype">uint16_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>timeout</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Raw receive function - returns timings for inter-mark gaps. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The buffer in which to place the inter-mark timings </td></tr>
    <tr><td class="paramname">timeout</td><td>The time to wait before returning </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The length of the buffer in bytes.</dd></dl>
<p>Receive a message if it's there to be received. Otherwise wait for a time that depends on the timeout value: if this is zero (as it is by default), then wait forever, else set a timer. If the timer expires return a negative number (-1), else return the length of the buffer received. The timeout is considered not to have expired if, by the time the period is passed, a message has <em>started</em> to arrive.</p>
<p>On return, the buffer contains the timings, in microseconds, between pairs of marks. Again, this allows a higher-level protocol to be written in a sketch. </p>

</div>
</div>
<a class="anchor" id="ga5380221a35dec8cae06e305a640047ad"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EngduinoIRClass::send </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>b</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startstop</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a byte. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>The byte to send </td></tr>
    <tr><td class="paramname">startstop</td><td>Whether to send mark bits as start/stop markers</td></tr>
  </table>
  </dd>
</dl>
<p>If startstop is true, send a mark at the beginning and end of data, but between the two, send the byte, LSB first. </p>

</div>
</div>
<a class="anchor" id="gabcf780f269e0570a4dcd1f07f628ba17"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EngduinoIRClass::send </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startstop</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a buffer of bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The buffer of bytes to send as a (uint8_t *) </td></tr>
    <tr><td class="paramname">len</td><td>Length of the buffer </td></tr>
    <tr><td class="paramname">startstop</td><td>Whether to send mark bits as start/stop markers</td></tr>
  </table>
  </dd>
</dl>
<p>If startstop is true, send a mark at the beginning and end of data, but between the two, send the individual bytes, LSB first. </p>

</div>
</div>
<a class="anchor" id="ga2f933b89a87c5234454509bf6bc53ea5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EngduinoIRClass::send </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>startstop</em> = <code>true</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a buffer of bytes. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>The buffer of bytes to send as a (char *) </td></tr>
    <tr><td class="paramname">len</td><td>Length of the buffer </td></tr>
    <tr><td class="paramname">startstop</td><td>Whether to send mark bits as start/stop markers</td></tr>
  </table>
  </dd>
</dl>
<p>If startstop is true, send a mark at the beginning and end of data, but between the two, send the individual bytes, LSB first. </p>

</div>
</div>
<a class="anchor" id="gaf8b6552647c01a98d12f3acb98f50b8a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EngduinoIRClass::sendBit </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>b</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send a single bit. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">b</td><td>The boolean representing the bit to be sent.</td></tr>
  </table>
  </dd>
</dl>
<p>This sends a single bit. A mark is sent as a mark signal, and a space is sent as a space followed by a mark. This encoding works well because we do not have to concern ourselves about the relative timings of runs of spaces. Instead a mark - space transition should always be a constant length, and this should be considerably longer than a mark - mark transition. </p>

</div>
</div>
<a class="anchor" id="gadd747831975bc37388f0ad27f6085c60"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void EngduinoIRClass::sendRaw </td>
          <td>(</td>
          <td class="paramtype">unsigned int *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Raw send function. Provide timings for mark and space pairs. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">buf</td><td>Buffer containing alternate mark/space timings in microseconds </td></tr>
    <tr><td class="paramname">len</td><td>Length of the buffer</td></tr>
  </table>
  </dd>
</dl>
<p>The argument to this function is a buffer containing alternate mark/space timings, given in milliseconds, allowing a higher-level protocol to be written in a sketch. </p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Feb 11 2015 23:31:16 for Engduino by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
